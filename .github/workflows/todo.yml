name: Check TODOs

on:
  push:
    branches: [ main, master, develop ]
  pull_request:
    branches: [ main, master, develop ]

jobs:
  detect-todos:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Fail if TODOs are found
        run: |
          # "TODO" を検索します
          if grep -rn "TODO" src tests; then
              echo "---------------------------------------------------"
              echo "❌ Error: TODO comments detected!"
              echo "Please resolve all TODOs before merging."
              echo "---------------------------------------------------"
              # ここで exit 1 を返すと、GitHub Actionsが「失敗」扱いになります
              exit 1
          else
              echo "✅ Success: No TODO comments found."
          fi